{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-5">
    <div class="border-bottom mb-4">
        <h2 class="fw-bold text-primary">Search Results for: "<span class="text-warning">{{ query }}</span>"</h2>
    </div>

    {% if not results_found %}
        <div class="alert alert-warning p-5 text-center">
            <i class="fas fa-search fa-3x mb-3 opacity-50"></i>
            <h4>No results found.</h4>
            <p>Try searching for "Theology", "Principal", or "Graduation".</p>
        </div>
    {% endif %}

    <div class="row">
        
        <!-- STAFF RESULTS (Principal, Lecturers) -->
        {% if staff_results %}
        <div class="col-12 mb-4">
            <h4 class="text-uppercase text-secondary border-start border-4 border-warning ps-2 mb-3">People & Staff</h4>
            <div class="list-group">
                {% for staff in staff_results %}
                <a href="{% url 'staff_detail' staff.slug %}" class="list-group-item list-group-item-action d-flex align-items-center">
                    {% if staff.photo %}
                        <img src="{{ staff.photo.url }}" class="rounded-circle me-3" width="50" height="50" style="object-fit: cover;">
                    {% else %}
                        <div class="bg-secondary rounded-circle me-3" style="width:50px; height:50px;"></div>
                    {% endif %}
                    <div>
                        <h5 class="mb-0 fw-bold text-primary">{{ staff.name }}</h5>
                        <small class="text-muted">{{ staff.role }}</small>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- ACADEMIC PROGRAMS -->
        {% if program_results %}
        <div class="col-12 mb-4">
            <h4 class="text-uppercase text-secondary border-start border-4 border-warning ps-2 mb-3">Academic Programs</h4>
            <div class="list-group">
                {% for prog in program_results %}
                <a href="{% url 'program_detail' prog.slug %}" class="list-group-item list-group-item-action">
                    <h5 class="mb-1 text-dark fw-bold">{{ prog.title }}</h5>
                    <span class="badge bg-info text-dark">{{ prog.get_category_display }}</span>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- NEWS & EVENTS -->
        {% if news_results or event_results %}
        <div class="col-12 mb-4">
            <h4 class="text-uppercase text-secondary border-start border-4 border-warning ps-2 mb-3">News & Events</h4>
            <div class="list-group">
                {% for news in news_results %}
                <a href="{% url 'news_detail' news.pk %}" class="list-group-item list-group-item-action">
                    <h6 class="mb-1 text-primary">{{ news.title }}</h6>
                    <small class="text-muted">News Article | {{ news.date_posted|date:"M d, Y" }}</small>
                </a>
                {% endfor %}
                
                {% for event in event_results %}
                <a href="{% url 'event_detail' event.pk %}" class="list-group-item list-group-item-action">
                    <h6 class="mb-1 text-success">{{ event.title }}</h6>
                    <small class="text-muted">Event | {{ event.date }}</small>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}